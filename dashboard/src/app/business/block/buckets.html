
<div class="content-header">
    <div class="table-toolbar">
        <div class="left">
            <button class="ui-button-secondary" pButton type="button" (click)="showCreateForm()" label="{{I18N.keyID['sds_block_volume_create']}}" ></button>
        </div>
        <div class="right">
            <div class="ui-inputsearch">
                <input type="text" #searchByName pInputText placeholder="{{I18N.keyID['sds_block_volume_search']}}">
                <button pButton type="button" icon="fa-search"></button>
            </div>
            <button class="" pButton type="button" (click)="getBuckets()"  icon="fa-refresh"></button>
        </div>
    </div>
    <p-dataTable [value]="allBuckets" [globalFilter]="searchByName" [(selection)]="selectedBuckets"  [showHeaderCheckbox]="true" [rows]="10" [paginator]="true" [pageLinks]="3" [rowsPerPageOptions]="[10,20,50,100]">
        <p-column field="name" header="{{I18N.keyID['sds_block_volume_name']}}" >
            <ng-template pTemplate="body" let-bucket="rowData">
                <a [routerLink]="['/bucketDetail/' + bucket.id]"  title="{{bucket.name}}">{{bucket.name}}</a>
            </ng-template>
        </p-column>
        <p-column field="backend" header="Default Backend" ></p-column>
        <p-column field="createdAt" header="Created At"></p-column>
        <p-column header="{{I18N.keyID['sds_block_volume_operation']}}" [style]="{'width': '335px'}">
            <ng-template pTemplate="body" let-bucket="rowData" let-i="rowIndex">
                <a (click)="configLife(bucket)">Configure Lifecycle</a>
                <a >Migrate</a>
                <a (click)="deleteBucket(bucket)">Delete</a>
            </ng-template>
        </p-column>
    </p-dataTable>
    
    <p-dialog  header="Create Bucket" [(visible)]="createBucketDisplay" [width]="600" modal="modal">
        <form [grid]="{label: 'ui-g-3', content:'ui-g-20'}" [formGroup]="createBucketForm" (ngSubmit)="onSubmit(createBucketForm.value)" [errorMessage]="errorMessage">
            <form-item label="Name" [required]="true">
                <input type="text" pInputText formControlName="name" />
            </form-item>
            <div style="margin-bottom: 10px;"><span style="font-size: 16px;font-style: normal">Default Backend</span></div>
            <span style="display:inline-block;color: rgb(136, 147, 166);margin-bottom: 10px;">Objects will be stored by default to the specified backend.</span>
            <form-item label="type" [required]="true">
                <p-dropdown [style]="{'min-width':'150px','width':'220px'}" [options]="allTypes" (onChange)="getBackendsByTypeId()" name='selectType' [(ngModel)]='selectType' formControlName="backend_type"></p-dropdown>
            </form-item>
            <form-item label="Backend" [required]="true">
                <p-dropdown [style]="{'min-width':'150px','width':'220px'}" [options]="backendsOption" formControlName="backend"></p-dropdown>
            </form-item>
        </form>
        <p-footer>
            <button type="submit" class="ui-button-secondary" pButton (click)="creatBucket()"  label="{{I18N.keyID['ok']}}"></button>
            <button type="button" pButton (click)="createBucketDisplay=false"  label="{{I18N.keyID['cancel']}}"></button>
        </p-footer>
    
    </p-dialog>
    <p-dialog  header="Configure Lifecycle" [(visible)]="showLife" [width]="800" modal="modal">
            <div style="border-top:1px solid #ccc;width:100%;padding:8px;">
                <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid">
                    <div class="ui-grid-row">
                        <div class="ui-grid-col-3 ">
                            More than<input type="text" value="30" style="display: inline-block;width:44px;" pInputText  /> Days,
                        </div>
                        <div class="ui-grid-col-4">
                            <p-dropdown [style]="{'width':'100px','display': 'inline-block'}" [options]="lifeOperation"></p-dropdown> &nbsp; to backend
                        </div>
                        <div class="ui-grid-col-4">
                            <p-dropdown [style]="{'width':'150px','display': 'inline-block'}" [options]="allBackends"></p-dropdown> &nbsp;&nbsp;&nbsp;
                            <img style="vertical-align: middle;" src="assets/business/images/profile/u1065.png">
                        </div>
                    </div>
                </div>
            </div>
            <div style="border-top:1px solid #ccc;width:100%;padding:8px;">
                <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid">
                    <div class="ui-grid-row">
                        <div class="ui-grid-col-3 ">
                            More than<input type="text" value="90" style="display: inline-block;width:44px;" pInputText  /> Days,
                        </div>
                        <div class="ui-grid-col-4">
                            <p-dropdown [style]="{'width':'100px','display': 'inline-block'}" [options]="lifeOperation"></p-dropdown> &nbsp; to backend
                        </div>
                        <div class="ui-grid-col-4">
                            <p-dropdown [style]="{'width':'150px','display': 'inline-block'}" [options]="allBackends"></p-dropdown> &nbsp;&nbsp;&nbsp;
                            <img style="vertical-align: middle;" src="assets/business/images/profile/u1065.png">
                        </div>
                    </div>
                </div>
            </div>
            <div style="border-top:1px solid #ccc;border-bottom:1px solid #ccc;width:100%;padding:8px;">
                <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid">
                    <div class="ui-grid-row">
                        <div class="ui-grid-col-3 ">
                            More than<input type="text" value="1" style="display: inline-block;width:44px;" pInputText  /> Year,
                        </div>
                        <div class="ui-grid-col-4">
                            <p-dropdown [style]="{'width':'100px','display': 'inline-block'}" [options]="lifeOperation"></p-dropdown> &nbsp; to backend
                        </div>
                        <div class="ui-grid-col-4">
                            <p-dropdown [style]="{'width':'150px','display': 'inline-block','visibility': 'hidden'}" [options]="lifeOperation"></p-dropdown> &nbsp;&nbsp;&nbsp;
                            <img style="vertical-align: middle;" src="assets/business/images/profile/u1065.png">
                        </div>
                    </div>
                </div>
            </div>
            <div class="volume-item" *ngIf="true">
                <a class="item-flex">
                    <img width="24" height="24" src="assets/business/images/volume/u937.png" >
                    <span class="margin-between-img-text">Add Rules</span>
                </a>
            </div>
            <p-footer>
                <button type="submit" disabled="true" pButton  label="{{I18N.keyID['ok']}}"></button>
                <button type="button" pButton (click)="showLife=false"  label="{{I18N.keyID['cancel']}}"></button>
            </p-footer>
        
        </p-dialog>
    <p-confirmDialog></p-confirmDialog>
</div>
